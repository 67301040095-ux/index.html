<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chiller Plant Overlay</title>

<style>
body {
  margin:0;
  background:#f0f0f0;
  font-family:Arial;
}

.wrapper {
  position:relative;
  width:1200px;
  margin:auto;
}

.plant-img {
  width:100%;
  display:block;
}

svg {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
}

.pipe {
  stroke-width:8;
  fill:none;
  stroke-dasharray:15;
  animation:none;
}

.condenser { stroke:#ff9900; }
.chilled   { stroke:#0099ff; }

.flow {
  animation: flow 1s linear infinite;
}

@keyframes flow {
  from { stroke-dashoffset:0; }
  to { stroke-dashoffset:-30; }
}

button {
  position:fixed;
  top:20px;
  left:20px;
  padding:10px 20px;
  font-size:16px;
}
</style>
</head>
<body>

<button onclick="startSystem()">START SYSTEM</button>

<div class="wrapper">

<img src="plant.png" class="plant-img">

<svg viewBox="0 0 1200 700">

  <!-- Condenser Loop -->
  <path id="condPipe"
    class="pipe condenser"
    d="M150 200 L350 200 L350 350 L150 350 Z" />

  <!-- Chilled Loop -->
  <path id="chilPipe"
    class="pipe chilled"
    d="M600 250 L900 250 L900 350 L600 350 Z" />

</svg>
</div>

<script>
let ctRunning = false;

function startSystem() {

  // 1. CDP ทำงาน → เปิด condenser flow
  document.getElementById("condPipe").classList.add("flow");

  setTimeout(() => {

    // 2. CT ทำงาน → พัดลมหมุน
    ctRunning = true;
    rotateFan();

  }, 2000);

  setTimeout(() => {

    // 3. CHP ทำงาน → เปิด chilled flow
    document.getElementById("chilPipe").classList.add("flow");

  }, 4000);

}

function rotateFan() {
  if(!ctRunning) return;

  let angle = 0;
  setInterval(() => {
    angle += 55;
    console.log("Fan rotate:", angle);
  }, 10000); // 5วิหมุน + 5วิพัก = 10วิ
}
</script>

</body>
</html>
